<t t-name="stock.label_transfer_template_view.basis57">
    <t t-call="web.basic_layout">
        <t t-foreach="docs" t-as="picking">
            <t t-foreach="picking.move_lines" t-as="move">
                
                <!--Set default values-->
                <t t-set="count_boxes" t-value="0" />
                <t t-set="count_labels" t-value="0" />
                
                <!-- Select loop based product packaing -->
                <t t-if="move.product_packaging.name == 'Schale Gross'">
                    <t t-set="print_weight" t-value="False" />
                    <t t-set="fix_weight">2'500g</t>
                    <t t-set="count_boxes" t-value="move.x_count_boxes" />
                    <t t-set="count_labels" t-value="move.quantity_done/2.5" />
                </t>
                <t t-if="move.product_packaging.name == 'Schale Klein'">
                    <t t-set="print_weight" t-value="False" />
                    <t t-set="fix_weight">1'000g</t>
                    <t t-set="count_boxes" t-value="move.x_count_boxes" />
                    <t t-set="count_labels" t-value="move.quantity_done" />
                </t>
                <t t-if="move.product_packaging.name == 'Kiste'">
                    <t t-set="print_weight" t-value="True" />
                    <t t-set="count_boxes" t-value="move.x_count_boxes" />
                    <t t-set="count_labels" t-value="0" />
                </t>
                <t t-if="move.product_packaging.name == 'Vakuum'">
                    <t t-set="print_weight" t-value="False" />
                    <t t-set="fix_weight">1'000g</t>
                    <t t-set="count_boxes" t-value="0" />
                    <t t-set="count_labels" t-value="move.quantity_done" />
                </t>
                <t t-if="move.product_packaging.name == 'Karton'">
                    <t t-set="print_weight" t-value="False" />
                    <t t-set="fix_weight">5'000g</t>
                    <t t-set="count_boxes" t-value="1" />
                    <t t-set="count_labels" t-value="0" />
                </t>

                <!-- <p>Name: <span t-esc="move.product_id.name"/></p> -->
                <!-- <p>Boxes: <span t-esc="count_boxes"/></p>
                <p>Labels: <span t-esc="count_labels"/></p>
                <p>Moves Lines: <span t-esc="len(move.move_line_ids)"/></p> -->

                <t t-foreach="move.move_line_ids" t-as="move_line"> 
                <t t-foreach="range(0, int(count_labels + count_boxes))" t-as="page">
                    <t t-if="page_index >= count_labels">
                        <!-- <t t-set="print_weight" t-value="True" /> -->
                        <t t-set="fix_weight"></t>
                    </t>

                    <style>
                      .display {
                          font-size: 15mm;
                      }
                      .title {
                          font-size: 14mm;
                      }
                      .address {
                          font-size: 10mm;
                      }
                      .default {
                          font-size: 8mm;
                      }
                      .footer {
                          font-size: 8mm;
                      }
                      div.label {
                          line-height: 1.2;
                          text-align: center;
                      }
                      br {
                          font-size: 3mm;
                      }
                      .space-right {
                        margin-right: 2mm
                      }
                      .address-space-right {
                        padding-right: 3mm
                      }
                    </style>
                    <div class="page">
                        <div class="label">
                          
                            <t t-if="picking.partner_id.hide_address">
                              <br/>
                              <br/>
                              <br/>
                            </t>
                            
                            <br/>
                            <br/>
                            <br/>
                            <span class="text-uppercase use-font-opensans-medium title">Gotthard Zander</span>
                            <br/>
                            <span class="text-uppercase use-font-opensans-bold display" t-esc="move.product_id.name"/>
                            <br/>
                            <span class="use-font-opensans-medium default">(Sander lucioperca) in Aquakultur gewonnen</span>
                            <br/>
                            <t t-if="fix_weight or print_weight">
                                <span class="use-font-opensans-medium default">Gewicht: </span>
                                <span class="use-font-opensans-medium default" t-if="not print_weight" t-esc="fix_weight" />
                                <span class="use-font-opensans-medium default" t-if="print_weight" t-esc="move_line.qty_done *1000" t-options='{"widget": "float", "precision": 0}'/>
                                <span class="use-font-opensans-medium default" t-if="print_weight">g zu <span t-esc="count_boxes"/> Kisten</span>
                            </t>

                            <br/>
                            <br/>

                            <t t-if="not picking.partner_id.hide_address">
                              <span class="use-font-opensans-bold address" t-field="picking.partner_id.name"/>
                              <br/>
                              <span class="use-font-opensans-bold address address-space-right" t-field="picking.partner_id.zip"/>
                              <span class="use-font-opensans-bold address" t-field="picking.partner_id.city"/>
                              <br/>
                              <br/>
                            </t>

                            <span class="use-font-opensans-medium default">Verpackt am: </span>
                            <span class="use-font-opensans-medium default" t-esc="picking.scheduled_date.strftime('%d.%m.%Y')"/>
                            <br/>
                            <span class="use-font-opensans-medium default">Zu verbrauchen bis: </span>
                            <span t-set="delta" t-value="datetime.timedelta(days=5)"/>
                            <span t-set="consume_until" t-value="picking.scheduled_date + delta"/>
                            <span class="use-font-opensans-medium default" t-esc="consume_until.strftime('%d.%m.%Y')"/>
                            <br/>
                            <span class="use-font-opensans-medium default">Aufbewahrung: kühl bei 2°C</span>
                            <br/>
                            <br/>

                            <t t-if="move_line.lot_id.name">
                                <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', move_line.result_package_id.name, 600, 50)" alt="Barcode"/>
                            </t>
                            <t t-else="">
                                <span class="use-font-opensans-medium default text-muted">No barcode available</span>
                            </t>
                            <br/>
                            <br/>
                            
                            <span class="text-uppercase use-font-opensans-bold default">Gotthard Zander</span>
                            <span class="use-font-opensans-bold default"> by Basis57</span>
                            <br/>
                            <br/>
                            <span class="use-font-opensans-medium footer" t-field="res_company.street"/><span class="use-font-opensans-medium footer space-right">,</span>
                            <span class="use-font-opensans-medium footer space-right" t-field="res_company.zip"/><span class="use-font-opensans-medium footer" t-field="res_company.city"/>
                            <br/>
                            <span class="use-font-opensans-medium footer">www.gotthard-zander.ch</span>
                            
                        </div>
                        <p style="page-break-before:always;" />
                    </div>

                </t>
                </t>

            </t>
        </t>
    </t>
</t>
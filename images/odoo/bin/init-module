#!/usr/bin/env bash
set -e

odoo_database=${1:=$ODOO_DATABASE}

if check-database-initialized "$odoo_database"; then
    odoo_init_lang="${ODOO_INIT_LANG:="en_US"}"

    log-entrypoint "Initialize module $1 on database $odoo_database."
    (exec odoo "${DB_ARGS[@]}" --database "$odoo_database" --init "$1" --config "$ODOO_RC" --stop-after-init --no-http --load-language "$odoo_init_lang" --without-demo=all) || true
fi

#!/bin/bash
set -e

if [ -n "$ODOO_DATABASE" ]; then
    if check-database-initialized; then
        ODOO_INIT_LANG="${ODOO_INIT_LANG:="en_US"}"

        log-entrypoint "Initialize module $1 on database $ODOO_DATABASE."
        (exec odoo "${DB_ARGS[@]}" --database "$ODOO_DATABASE" --init "$1" --config "$ODOO_RC" --stop-after-init --no-http --load-language "$ODOO_INIT_LANG" --without-demo=all) || true
    fi
fi
